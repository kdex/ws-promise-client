!function(e,t){if("function"==typeof define&&define.amd)define(["exports","ws","./EventEmitter.js","./ServerClient.js"],t);else if("undefined"!=typeof exports)t(exports,require("ws"),require("./EventEmitter.js"),require("./ServerClient.js"));else{var r={exports:{}};t(r.exports,e.WebSocket,e.EventEmitter,e.ServerClient),e.Server=r.exports}}(this,function(e,t,r,o){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var f=function(e,t,r){for(var o=!0;o;){var n=e,i=t,f=r;u=c=s=void 0,o=!1,null===n&&(n=Function.prototype);var u=Object.getOwnPropertyDescriptor(n,i);if(void 0!==u){if("value"in u)return u.value;var s=u.get;return void 0===s?void 0:s.call(f)}var c=Object.getPrototypeOf(n);if(null===c)return void 0;e=c,t=i,r=f,o=!0}},u=function(e){function r(e){var i=this;n(this,r),f(Object.getPrototypeOf(r.prototype),"constructor",this).call(this),this.wss=new t["default"].Server(e);for(var u=["error","headers","connection"],s=function(){var e=u[c];i.wss.on(e,function(t){var r=new o["default"](t);i.emit(e,r)})},c=0;c<u.length;c++)s()}return i(r,e),r}(r["default"]);e.Server=u,e["default"]=u});